"use strict";var SignalHTML=(()=>{var R=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var z=Object.getOwnPropertyNames;var J=Object.prototype.hasOwnProperty;var Q=(e,t)=>{for(var n in t)R(e,n,{get:t[n],enumerable:!0})},Y=(e,t,n,o)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of z(t))!J.call(e,r)&&r!==n&&R(e,r,{get:()=>t[r],enumerable:!(o=_(t,r))||o.enumerable});return e};var Z=e=>Y(R({},"__esModule",{value:!0}),e);var ge={};Q(ge,{Computed:()=>m,SignalHTML:()=>W,State:()=>g,default:()=>he,effect:()=>v,untrack:()=>b});var l=null,C=!1,E=1,M={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{}};function y(e){let t=l;return l=e,t}function ee(){return C}function w(e){e.producerNode??=[],e.producerIndexOfThis??=[],e.producerLastReadVersion??=[]}function D(e){e.liveConsumerNode??=[],e.liveConsumerIndexOfThis??=[]}function L(e){return e.consumerIsAlwaysLive||(e?.liveConsumerNode?.length??0)>0}function j(e,t,n){if(D(e),w(e),e.liveConsumerNode.length===0){e.watched?.call(e.wrapper);for(let o=0;o<e.producerNode.length;o++)e.producerIndexOfThis[o]=j(e.producerNode[o],e,o)}return e.liveConsumerIndexOfThis.push(n),e.liveConsumerNode.push(t)-1}function x(e,t){if(D(e),w(e),e.liveConsumerNode.length===1){e.unwatched?.call(e.wrapper);for(let o=0;o<e.producerNode.length;o++)x(e.producerNode[o],e.producerIndexOfThis[o])}let n=e.liveConsumerNode.length-1;if(e.liveConsumerNode[t]=e.liveConsumerNode[n],e.liveConsumerIndexOfThis[t]=e.liveConsumerIndexOfThis[n],e.liveConsumerNode.length--,e.liveConsumerIndexOfThis.length--,t<e.liveConsumerNode.length){let o=e.liveConsumerIndexOfThis[t],r=e.liveConsumerNode[t];w(r),r.producerIndexOfThis[o]=t}}function $(e){if(C)throw new Error("Read in notify");if(l===null)return;let t=l.nextProducerIndex++;if(w(l),t<l.producerNode.length&&l.producerNode[t]!==e&&L(l)){let n=l.producerNode[t];x(n,l.producerIndexOfThis[t])}l.producerNode[t]!==e&&(l.producerNode[t]=e,l.producerIndexOfThis[t]=L(l)?j(e,l,t):0),l.producerLastReadVersion[t]=e.version}function te(){E++}function ne(e){w(e);for(let t=0;t<e.producerNode.length;t++){let n=e.producerNode[t],o=e.producerLastReadVersion[t];if(o!==n.version||(H(n),o!==n.version))return!0}return!1}function H(e){if(!(!e.dirty&&e.lastCleanEpoch===E)){if(!e.producerMustRecompute(e)&&!ne(e)){e.dirty=!1,e.lastCleanEpoch=E;return}e.producerRecomputeValue(e),e.dirty=!1,e.lastCleanEpoch=E}}function F(e){if(e.liveConsumerNode===void 0)return;let t=C;C=!0;try{for(let n of e.liveConsumerNode)n.dirty||oe(n)}finally{C=t}}function oe(e){e.dirty=!0,F(e),e.consumerMarkedDirty?.call(e.wrapper??e)}function re(e){return e&&(e.nextProducerIndex=0),y(e)}function ie(e,t){if(y(t),!(!e||e.producerNode===void 0)){if(L(e))for(let n=e.nextProducerIndex;n<e.producerNode.length;n++)x(e.producerNode[n],e.producerIndexOfThis[n]);for(;e.producerNode.length>e.nextProducerIndex;)e.producerNode.pop(),e.producerLastReadVersion.pop(),e.producerIndexOfThis.pop()}}function q(e,t){return Object.is(e,t)}var d=Symbol("node"),k=Symbol("UNSET"),I=Symbol("COMPUTING"),A=Symbol("ERRORED"),g=class{[d];constructor(t,n={}){let o=Object.create(M);o.value=t,o.equal=n.equals??q,o.version=0,o.wrapper=this,this[d]=o}get(){return $(this[d]),this[d].value}set(t){if(ee())throw new Error("Write in notify");let n=this[d];n.equal(n.value,t)||(n.value=t,n.version++,te(),F(n))}},m=class{[d];constructor(t,n={}){let o=Object.create(M);o.computation=t,o.value=k,o.dirty=!0,o.error=null,o.equal=n.equals??q,o.consumerAllowSignalWrites=!0,o.wrapper=this,o.producerMustRecompute=r=>r.value===k||r.value===I,o.producerRecomputeValue=r=>{if(r.value===I)throw new Error("Cycle");let i=r.value;r.value=I;let s=re(r),u,c=!1;try{u=r.computation(),c=i!==k&&i!==A&&r.equal(i,u)}catch(p){u=A,r.error=p}finally{ie(r,s)}if(c){r.value=i;return}r.value=u,r.version++},this[d]=o}get(){let t=this[d];if(H(t),$(t),t.value===A)throw t.error;return t.value}},S=class{[d];#e=[];constructor(t){let n=Object.create(M);n.wrapper=this,n.consumerMarkedDirty=t,n.consumerIsAlwaysLive=!0,n.consumerAllowSignalWrites=!1,n.producerNode=[],this[d]=n}watch(...t){let n=this[d];n.dirty=!1;let o=y(n);for(let r of t)$(r[d]),this.#e.includes(r)||this.#e.push(r);y(o)}unwatch(...t){let n=this[d];w(n);for(let o=n.producerNode.length-1;o>=0;o--){let r=n.producerNode[o];if(t.some(i=>i[d]===r)){x(r,n.producerIndexOfThis[o]);let i=n.producerNode.length-1;if(n.producerNode[o]=n.producerNode[i],n.producerIndexOfThis[o]=n.producerIndexOfThis[i],n.producerNode.length--,n.producerIndexOfThis.length--,o<n.producerNode.length){let s=n.producerIndexOfThis[o],u=n.producerNode[o];D(u),u.liveConsumerIndexOfThis[s]=o}}}this.#e=this.#e.filter(o=>!t.includes(o))}getPending(){return(this[d].producerNode??[]).filter(n=>n.dirty&&n.computation!==void 0).map(n=>n.wrapper)}};function b(e){let t=y(null);try{return e()}finally{y(t)}}var V=!0;var O=new S(()=>{V&&(V=!1,queueMicrotask(se))});function se(){V=!0;for(let e of O.getPending())e.get();O.watch()}function v(e){let t,n=new m(()=>{typeof t=="function"&&t(),t=e()});return O.watch(n),n.get(),()=>{O.unwatch(n),typeof t=="function"&&t()}}var f={DATA:"x-data",TEXT:"x-text",HTML:"x-html",SHOW:"x-show",BIND:"x-bind",MODEL:"x-model",ON:"x-on",IF:"x-if",FOR:"x-for",REF:"x-ref"},ue=new WeakMap;function ce(e,t){let n={},o={},r={signals:n,computeds:o,el:e,get(c){if(c in n)return n[c].get();if(c in o)return o[c].get()},set(c,p){c in n&&n[c].set(p)}},i=new Function(`return (${t})`)();for(let[c,p]of Object.entries(i))typeof p!="function"&&(n[c]=new g(p));let s=Object.keys(n),u=c=>{let p=s.map(a=>`get ${a}() { return s.get('${a}'); }`).join(","),h=s.map(a=>`set ${a}(v) { s.set('${a}', v); }`).join(",");return`with({${p}${h?","+h:""}}){return(${c})}`};for(let[c,p]of Object.entries(i))if(typeof p=="function"){let h=p.toString(),a;if(h.includes("=>")){let N=h.indexOf("=>");a=h.slice(N+2).trim(),a.startsWith("{")&&a.endsWith("}")&&(a=a.slice(1,-1).trim(),a.includes("return")||(a=`return (${a})`))}else{let N=h.match(/\{([\s\S]*)\}/);a=N?N[1].trim():"undefined"}let K=u(a),X=new Function("s",K);o[c]=new m(()=>{try{return X(r)}catch(N){console.error(`Error in computed "${c}":`,N);return}})}return ue.set(e,r),r}function U(e){let n=[...Object.keys(e.signals),...Object.keys(e.computeds)].map(r=>`get ${r}(){return s.get('${r}')}`).join(","),o=Object.keys(e.signals).map(r=>`set ${r}(v){s.set('${r}',v)}`).join(",");return`with({${n}${o?","+o:""}})`}function T(e,t){try{return new Function("s",`${U(t)}{return(${e})}`)(t)}catch(n){console.error(`Error evaluating: ${e}`,n);return}}function G(e,t,n){try{new Function("s","$event",`${U(t)}{${e}}`)(t,n)}catch(o){console.error(`Error executing: ${e}`,o)}}function ae(e,t,n){v(()=>{let o=T(t,n);e.textContent=String(o??"")})}function le(e,t,n){v(()=>{let o=T(t,n);e.innerHTML=String(o??"")})}function de(e,t,n){let o=e.style.display||"";v(()=>{let r=T(t,n);e.style.display=r?o:"none"})}function pe(e,t,n,o){v(()=>{let r=T(n,o);if(t==="class")if(typeof r=="object"&&r!==null)for(let[i,s]of Object.entries(r))e.classList.toggle(i,!!s);else e.setAttribute("class",String(r??""));else if(t==="style")if(typeof r=="object"&&r!==null)for(let[i,s]of Object.entries(r))e.style.setProperty(i,String(s??""));else e.setAttribute("style",String(r??""));else r==null||r===!1?e.removeAttribute(t):r===!0?e.setAttribute(t,""):e.setAttribute(t,String(r))})}function fe(e,t,n){let o=e;v(()=>{let i=T(t,n);o.type==="checkbox"?o.checked=!!i:o.type==="radio"?o.checked=o.value===String(i):o.value=String(i??"")});let r=o.tagName==="SELECT"||o.type==="checkbox"||o.type==="radio"?"change":"input";o.addEventListener(r,()=>{let i;o.type==="checkbox"?i=o.checked:o.type==="number"||o.type==="range"?i=o.valueAsNumber:i=o.value,t in n.signals?n.set(t,i):G(`${t} = ${JSON.stringify(i)}`,n)})}function me(e,t,n,o){let r=t.split("."),i=r[0],s=new Set(r.slice(1));e.addEventListener(i,u=>{s.has("prevent")&&u.preventDefault(),s.has("stop")&&u.stopPropagation(),!(s.has("self")&&u.target!==e)&&(u instanceof KeyboardEvent&&(s.has("enter")&&u.key!=="Enter"||s.has("escape")&&u.key!=="Escape"||s.has("space")&&u.key!==" "||s.has("tab")&&u.key!=="Tab")||G(n,o,u))},{once:s.has("once"),capture:s.has("capture")})}function B(e,t){let n=Array.from(e.attributes);for(let o of n){let r=o.name,i=o.value;if(r===f.TEXT)ae(e,i,t);else if(r===f.HTML)le(e,i,t);else if(r===f.SHOW)de(e,i,t);else if(r===f.MODEL)fe(e,i,t);else if(r.startsWith(f.BIND+":")||r.startsWith(":")){let s=r.startsWith(":")?r.slice(1):r.slice(f.BIND.length+1);pe(e,s,i,t)}else if(r.startsWith(f.ON+":")||r.startsWith("@")){let s=r.startsWith("@")?r.slice(1):r.slice(f.ON.length+1);me(e,s,i,t)}}}function ve(e){let t=e.getAttribute(f.DATA);if(!t)return;let n;try{n=ce(e,t)}catch(i){console.error(`Error parsing x-data: ${t}`,i);return}B(e,n);let o=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT),r;for(;r=o.nextNode();)r.hasAttribute(f.DATA)||B(r,n)}function P(e=document){let t=e.querySelectorAll(`[${f.DATA}]`);for(let n of t)ve(n)}typeof document<"u"&&(document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>P()):queueMicrotask(()=>P()));var W={init:P,State:g,Computed:m,effect:v,untrack:b,version:"0.1.0"},he=W;typeof window<"u"&&(window.SignalHTML=W);return Z(ge);})();
